<?xml version="1.0" encoding="utf-8"?>
<Patch MayRequire="Ludeon.RimWorld.Odyssey">
  <!-- Remove Gravlite panels option from Odyssey Scarlands crate loot -->
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingSetMakerDef[defName='MapGen_ScarlandsHermeticCrate']/root/options/li[thingSetMaker/fixedParams/filter/thingDefs/li='GravlitePanel']</xpath>
  </Operation>
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingSetMakerDef[defName='MapGen_HighValueCrate']/root/options/li[thingSetMaker/fixedParams/filter/thingDefs/li='GravlitePanel']</xpath>
  </Operation>

  <!-- Replace Silver with Gold in Scarlands hermetic crate loot -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ThingSetMakerDef[defName='MapGen_ScarlandsHermeticCrate']/root/options/li[thingSetMaker/fixedParams/filter/thingDefs/li='Silver']/thingSetMaker/fixedParams/filter/thingDefs</xpath>
    <value>
      <thingDefs>
        <li>Gold</li>
      </thingDefs>
    </value>
  </Operation>

  <!-- Remove Hyperweave from Scarlands crate loot (keep Plasteel) -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ThingSetMakerDef[defName='MapGen_ScarlandsHermeticCrate']/root/options/li[thingSetMaker/fixedParams/filter/thingDefs/li='Hyperweave']/thingSetMaker/fixedParams/filter/thingDefs</xpath>
    <value>
      <thingDefs>
        <li>Plasteel</li>
      </thingDefs>
    </value>
  </Operation>
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ThingSetMakerDef[defName='MapGen_HighValueCrate']/root/options/li[thingSetMaker/fixedParams/filter/thingDefs/li='Hyperweave']/thingSetMaker/fixedParams/filter/thingDefs</xpath>
    <value>
      <thingDefs>
        <li>Plasteel</li>
      </thingDefs>
    </value>
  </Operation>

    <!-- Replace vanilla power armor, charge weapons, and assault rifle in ancient temple loot with FCP equivalents and other FCP/vanilla items -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingSetMakerDef[defName='MapGen_ScarlandsHermeticCrate']/root/options/li[thingSetMaker/fixedParams/filter/thingDefs/li='Apparel_PowerArmor']/thingSetMaker/fixedParams/filter/thingDefs</xpath>
        <value>
                <thingDefs>
                  <li>TechprofSubpersonaCore</li>
                  <li>ArchotechEye</li>
                  <li>ArchotechArm</li>
                  <li>ArchotechLeg</li>
                  <li>PowerClaw</li>
                  <li>BionicEye</li>
                  <li>BionicArm</li>
                  <li>BionicLeg</li>
                  <li>BionicSpine</li>
                  <li>BionicHeart</li>
                  <li>Joywire</li>
                  <li>Painstopper</li>
                  <li>Shell_AntigrainWarhead</li>
                  <li>MechSerumHealer</li>
                  <li>MechSerumResurrector</li>
                  <li>FlatscreenTelevision</li>
                  <li>MegascreenTelevision</li>
                  <li>SculptureGrand</li>
                  <!-- FCP Power Armor T45, T51, T60 base (no paints/faction variants) -->
                  <li>FCP_Apparel_Power_Armor_T45Armor</li>
                  <li>FCP_Apparel_Power_Armor_T45_Helmet</li>
                  <li>FCP_Apparel_Power_Armor_T51Armor</li>
                  <li>FCP_Apparel_Power_Armor_T51_Helmet</li>
                  <li>FCP_Apparel_Power_Armor_T60Armor</li>
                  <li>FCP_Apparel_Power_Armor_T60_Helmet</li>
                  <li>FCP_Item_Fusion_Core</li>
                  <!-- FCP Gauss weapons (5) -->
                  <li>FCP_Gun_PPK12_Gauss_Pistol</li>
                  <li>FCP_Gun_M72_Gauss_Rifle</li>
                  <li>FCP_Gun_Gauss_Minigun</li>
                  <li>FCP_Gun_Gauss_Sniper_Rifle</li>
                  <li>FCP_Gun_M72_A2_Gauss_Rifle</li>
                  <!-- FCP ballistic / assault -->
                  <li>FCP_Gun_G11_AR</li>
                  <li>FCP_Gun_AK_112_AR</li>
                  <li>FCP_Gun_Chinese_Assault_Rifle</li>
                  <li>FCP_Gun_Assault_Carbine</li>
                  <li>FCP_Gun_Power_Armor_Assault_Rifle</li>
                  <!-- FCP melee / unarmed -->
                  <li>FCP_Melee_Super_Sledge</li>
                  <li>FCP_Unarmed_Power_Fist</li>
                  <li>FCP_Melee_Ripper</li>
                  <!-- FCP energy -->
                  <li>FCP_Gun_Gatling_Laser</li>
                  <li>FCP_Gun_Gatling_Laser_MkI</li>
                  <li>FCP_Gun_Minigun</li>
                  <li>FCP_Gun_Laser_RCW</li>
                  <li>FCP_Gun_Plasma_Caster</li>
                  <li>FCP_Gun_Plasma_Caster_MkI</li>
                  <li>FCP_Gun_Plasma_Defender</li>
                  <li>FCP_Gun_Plasma_Machine_Gun</li>
                  <li>Apparel_PackJump</li>
                  <li>FCP_Gun_Vindicator</li>
                </thingDefs>
        </value>
    </Operation>

  <!-- MapGen_HighValueCrate: in misc high-value option, remove Gun_BeamRepeater, add Gatling Laser, Laser RCW, Vindicator -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ThingSetMakerDef[defName='MapGen_HighValueCrate']/root/options/li[thingSetMaker/fixedParams/filter/thingDefs/li='Apparel_PsychicInsanityLance']/thingSetMaker/fixedParams/filter/thingDefs</xpath>
    <value>
      <thingDefs>
        <li>Apparel_PsychicInsanityLance</li>
        <li>Apparel_PsychicShockLance</li>
        <li>ArchotechArm</li>
        <li>ArchotechEye</li>
        <li>ArchotechLeg</li>
        <li>Gun_DoomsdayRocket</li>
        <li>Gun_TripleRocket</li>
        <li>FCP_Gun_Gatling_Laser</li>
        <li>FCP_Gun_Laser_RCW</li>
        <li>FCP_Gun_Vindicator</li>
        <li>MechSerumHealer</li>
        <li>MechSerumResurrector</li>
        <li>OrbitalTargeterBombardment</li>
        <li>OrbitalTargeterPowerBeam</li>
        <li>PsychicAnimalPulser</li>
        <li>PsychicEmanator</li>
        <li>PsychicSoothePulser</li>
        <li>ReinforcedBarrel</li>
        <li>Shell_AntigrainWarhead</li>
        <li>TechprofSubpersonaCore</li>
        <li>TornadoGenerator</li>
        <li>VanometricPowerCell</li>
        <li MayRequire="Ludeon.RimWorld.Biotech">ArchiteCapsule</li>
        <li MayRequire="Ludeon.RimWorld.Biotech">DeathrestCapacitySerum</li>
        <li MayRequire="Ludeon.RimWorld.Biotech">Genepack</li>
        <li MayRequire="Ludeon.RimWorld.Anomaly">BiomutationPulser</li>
        <li MayRequire="Ludeon.RimWorld.Anomaly">Apparel_BiomutationLance</li>
      </thingDefs>
    </value>
  </Operation>
</Patch>
