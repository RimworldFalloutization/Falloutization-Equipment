<?xml version="1.0" encoding="utf-8"?>
<Patch>
    <!-- Remove Recon, Marine (Powered), and Cataphract armor research and make those armors uncraftable, uncategorized, and untagged. -->

    <!-- Clear prerequisites that point to removed projects first, then remove research projects -->
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ResearchProjectDef[defName='CataphractArmor']/prerequisites</xpath>
        <value><prerequisites /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ResearchProjectDef[defName='PoweredArmor']/prerequisites</xpath>
        <value><prerequisites /></value>
    </Operation>

    <!-- Remove FCP references to removed research projects -->
    <Operation Class="PatchOperationRemove" MayRequire="Rick.FCP.Enclave">
        <xpath>Defs/ResearchProjectDef[defName='FCP_Research_Enclave_Advanced_Equipment']/prerequisites/li[.='PoweredArmor']</xpath>
    </Operation>
    <Operation Class="PatchOperationRemove" MayRequire="Rick.FCP.Core.Tools">
        <xpath>Defs/ResearchProjectDef[defName='FCP_Research_Power_Armor_Applications']/prerequisites/li[.='PoweredArmor']</xpath>
    </Operation>

    <!-- Remove the research projects -->
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/ResearchProjectDef[defName='ReconArmor']</xpath>
    </Operation>
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/ResearchProjectDef[defName='PoweredArmor']</xpath>
    </Operation>
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ResearchProjectDef[defName='CataphractArmor']</xpath>
    </Operation>

    <!-- Remove Recon Armor -->
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[@Name='ApparelArmorReconBase']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorReconBase']/thingCategories</xpath>
        <value><thingCategories Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorReconBase']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorReconBase']/thingSetMakerTags</xpath>
        <value><thingSetMakerTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorReconBase']/apparel/defaultOutfitTags</xpath>
        <value><defaultOutfitTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[@Name='ApparelArmorReconBase']/apparel</xpath>
        <value><tags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorRecon']/recipeMaker</xpath>
    </Operation>

    <!-- Remove Recon Helmet  -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetReconBase']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetReconBase']/thingSetMakerTags</xpath>
        <value><thingSetMakerTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetReconBase']</xpath>
        <value><thingCategories Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetReconBase']/apparel/defaultOutfitTags</xpath>
        <value><defaultOutfitTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetReconBase']/apparel</xpath>
        <value><tags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetReconBase']/recipeMaker</xpath>
    </Operation>

    <!-- Revmove Powered Armor-->
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[@Name='ApparelArmorPowerBase']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorPowerBase']/thingCategories</xpath>
        <value><thingCategories Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorPowerBase']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorPowerBase']/thingSetMakerTags</xpath>
        <value><thingSetMakerTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorPowerBase']/apparel/defaultOutfitTags</xpath>
        <value><defaultOutfitTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[@Name='ApparelArmorPowerBase']/apparel</xpath>
        <value><tags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[defName='Apparel_PowerArmor']/recipeMaker</xpath>
    </Operation>

    <!-- Remove Powered Helmet -->
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetPowerBase']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetPowerBase']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetPowerBase']/thingSetMakerTags</xpath>
        <value><thingSetMakerTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetPowerBase']</xpath>
        <value><thingCategories Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetPowerBase']/apparel/defaultOutfitTags</xpath>
        <value><defaultOutfitTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetPowerBase']/apparel</xpath>
        <value><tags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/ThingDef[defName='Apparel_PowerArmorHelmet']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName='Apparel_PowerArmorHelmet']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>

    <!-- Remove Cataphract Armor and Helmet -->
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorCataphractBase']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorCataphractBase']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorCataphractBase']/thingCategories</xpath>
        <value><thingCategories Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorCataphractBase']/thingSetMakerTags</xpath>
        <value><thingSetMakerTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorCataphractBase']/apparel/defaultOutfitTags</xpath>
        <value><defaultOutfitTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationAdd" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorCataphractBase']/apparel</xpath>
        <value><tags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorCataphract']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorCataphract']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetCataphractBase']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetCataphractBase']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetCataphractBase']/thingSetMakerTags</xpath>
        <value><thingSetMakerTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationAdd" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetCataphractBase']</xpath>
        <value><thingCategories Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetCataphractBase']/apparel/defaultOutfitTags</xpath>
        <value><defaultOutfitTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationAdd" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[@Name='ApparelArmorHelmetCataphractBase']/apparel</xpath>
        <value><tags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorHelmetCataphract']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorReconPrestige']/recipeMaker</xpath>
    </Operation>

    <!-- Remove Locust Armor -->
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorLocust']/recipeMaker</xpath>
    </Operation>

    <!-- Remove Prestige Marine Armor and Helmet -->
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorMarinePrestige']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorMarineHelmetPrestige']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorMarineGrenadier']/recipeMaker</xpath>
    </Operation>

    <!-- Remove Prestige Cataphract Armor and Helmet -->
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorCataphractPrestige']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorCataphractPrestige']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorHelmetCataphractPrestige']/recipeMaker</xpath>
    </Operation>

    <!-- Remove Phoenix Armor -->
    <Operation Class="PatchOperationRemove" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorCataphractPhoenix']/recipeMaker</xpath>
    </Operation>
    <Operation Class="PatchOperationReplace" MayRequire="Ludeon.RimWorld.Royalty">
        <xpath>Defs/ThingDef[defName='Apparel_ArmorCataphractPhoenix']/tradeTags</xpath>
        <value><tradeTags Inherit="False" /></value>
    </Operation>
</Patch>
